2025-03-29 22:36:03,186 - INFO - 测试用例 1.normal scenarios 的响应结果: {
  "code": 200,
  "data": {
    "adjustment_log": [
      "初始权重: 赛博朋克(0.7)→霓虹灯光(0.5)",
      "语义强化: 赛博朋克+-0.56（CLIP相似度1.00）",
      "语义强化: 霓虹灯光+-0.40（CLIP相似度0.98）",
      "冲突检测: 无显式冲突"
    ],
    "conflict_report": {
      "detected": false,
      "potential_conflicts": []
    },
    "final_weights": {
      "赛博朋克": 0.14132758975028992,
      "霓虹灯光": 0.09712132066488266
    }
  },
  "debug_info": {
    "gpu_utilization": 0,
    "model_version": "v2.1",
    "processing_time_ms": 171
  }
}

2025-03-29 22:36:03,188 - ERROR - 测试用例 2.missing prompt 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 400,
  "message": "base_prompt和attributes是必填参数",
  "solution": [
    "在请求体中添加base_prompt和attributes字段"
  ]
}

2025-03-29 22:36:03,191 - ERROR - 测试用例 3.missing attributes 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 400,
  "message": "base_prompt和attributes是必填参数",
  "solution": [
    "在请求体中添加base_prompt和attributes字段"
  ]
}

2025-03-29 22:36:03,371 - ERROR - 测试用例 4.extreme temperature 0.1 发送请求时出错: 422 Client Error: UNPROCESSABLE ENTITY for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 42202,
  "message": "权重总和超出阈值（Σweights>1.5）",
  "solution": [
    "降低初始权重或启用自动归一化"
  ]
}

2025-03-29 22:36:03,549 - INFO - 测试用例 5.extreme temperature 5.0 的响应结果: {
  "code": 200,
  "data": {
    "adjustment_log": [
      "初始权重: 赛博朋克(0.7)→霓虹灯光(0.5)",
      "语义强化: 赛博朋克+-0.70（CLIP相似度1.00）",
      "语义强化: 霓虹灯光+-0.50（CLIP相似度0.98）",
      "冲突检测: 无显式冲突"
    ],
    "conflict_report": {
      "detected": false,
      "potential_conflicts": []
    },
    "final_weights": {
      "赛博朋克": 0.00023482383403461426,
      "霓虹灯光": 0.00016137270722538233
    }
  },
  "debug_info": {
    "gpu_utilization": 0,
    "model_version": "v2.1",
    "processing_time_ms": 174
  }
}

2025-03-29 22:36:03,552 - ERROR - 测试用例 6.temperature below range 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 40004,
  "message": "temperature值超出范围[0.0,5.0], 调整至范围内或使用默认值",
  "solution": [
    "将temperature的值设置在[0.1, 5.0]范围内"
  ]
}

2025-03-29 22:36:03,554 - ERROR - 测试用例 7.temperature above range 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 40004,
  "message": "temperature值超出范围[0.0,5.0], 调整至范围内或使用默认值",
  "solution": [
    "将temperature的值设置在[0.1, 5.0]范围内"
  ]
}

2025-03-29 22:36:03,677 - INFO - 测试用例 8.conflict attributes 的响应结果: {
  "code": 200,
  "data": {
    "adjustment_log": [
      "初始权重: 沙漠(0.7)→极光(0.5)",
      "语义强化: 沙漠+-0.23（CLIP相似度1.00）",
      "语义强化: 极光+-0.18（CLIP相似度0.98）"
    ],
    "conflict_report": {
      "detected": true,
      "potential_conflicts": [
        [
          "沙漠",
          "极光"
        ]
      ]
    },
    "final_weights": {
      "极光": 0.32488909363746643,
      "沙漠": 0.4692240059375763
    }
  },
  "debug_info": {
    "gpu_utilization": 0,
    "model_version": "v2.1",
    "processing_time_ms": 120
  }
}

2025-03-29 22:36:03,861 - INFO - 测试用例 9.new attributes 的响应结果: {
  "code": 200,
  "data": {
    "adjustment_log": [
      "初始权重: 黑夜(0.2)→远古森林(0.7)",
      "语义强化: 黑夜+-0.16（CLIP相似度1.00）",
      "语义强化: 远古森林+-0.58（CLIP相似度0.92）",
      "冲突检测: 无显式冲突"
    ],
    "conflict_report": {
      "detected": false,
      "potential_conflicts": []
    },
    "final_weights": {
      "远古森林": 0.12104757130146027,
      "黑夜": 0.04037930443882942
    }
  },
  "debug_info": {
    "gpu_utilization": 0,
    "model_version": "v2.1",
    "processing_time_ms": 180
  }
}

2025-03-29 22:36:03,864 - ERROR - 测试用例 11.Out-of-range weights 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 40003,
  "message": "initial_weight超出[0.0,1.0]范围，使用0.5作为默认值并重试",
  "solution": [
    "将initial_weight的值设置在[0.0, 1.0]范围内"
  ]
}

2025-03-29 22:36:03,867 - ERROR - 测试用例 12.lack attribution 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 40002,
  "message": "attributes数组为空，至少提供2个属性对象",
  "solution": [
    "在attributes数组中添加至少2个属性对象"
  ]
}

2025-03-29 22:36:04,067 - INFO - 测试用例 13.wrong fallback_strategy 的响应结果: {
  "code": 200,
  "data": {
    "adjustment_log": [
      "初始权重: 赛博朋克(0.7)→霓虹灯光(0.5)",
      "语义强化: 赛博朋克+-0.56（CLIP相似度1.00）",
      "语义强化: 霓虹灯光+-0.40（CLIP相似度0.98）",
      "冲突检测: 无显式冲突"
    ],
    "conflict_report": {
      "detected": false,
      "potential_conflicts": []
    },
    "final_weights": {
      "赛博朋克": 0.14132758975028992,
      "霓虹灯光": 0.09712132066488266
    }
  },
  "debug_info": {
    "gpu_utilization": 0,
    "model_version": "v2.1",
    "processing_time_ms": 197
  }
}

2025-03-29 22:36:04,070 - ERROR - 测试用例 14.conflict with strict fallback_strategy 发送请求时出错: 422 Client Error: UNPROCESSABLE ENTITY for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 42201,
  "message": "显式冲突（如同时包含\"白天\"和\"夜晚\"）",
  "solution": [
    "移除冲突属性或切换降级策略"
  ]
}

2025-03-29 22:36:04,073 - INFO - 测试用例 15.conflict attributes with balanced fallback_strategy 的响应结果: {
  "code": 200,
  "data": {
    "adjustment_log": [
      "属性 沙漠: 因冲突采用平衡策略，权重调整为 0.5",
      "属性 极光: 因冲突采用平衡策略，权重调整为 0.5"
    ],
    "conflict_report": {
      "detected": true,
      "potential_conflicts": [
        [
          "沙漠",
          "极光"
        ]
      ]
    },
    "final_weights": {
      "极光": 0.5,
      "沙漠": 0.5
    }
  },
  "debug_info": {
    "gpu_utilization": 0,
    "model_version": "v2.1",
    "processing_time_ms": 0
  }
}

2025-03-29 22:36:04,075 - ERROR - 测试用例 19.empty json 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 40004,
  "message": "请求体不能为空",
  "solution": [
    "确保请求体包含有效的数据"
  ]
}

2025-03-29 22:36:04,078 - ERROR - 测试用例 20.worng type 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 40005,
  "message": "attribute的type字段必须为text、image或vector",
  "solution": [
    "将type字段的值设置为text、image或vector"
  ]
}

2025-03-29 22:36:04,081 - ERROR - 测试用例 16.lack headers 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 400,
  "message": "缺少X-Api-Key",
  "solution": [
    "在请求头中添加X-Api-Key字段并设置有效的值"
  ]
}

2025-03-29 22:36:04,085 - ERROR - 测试用例 17.lack content-type 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 400,
  "message": "base_prompt和attributes是必填参数",
  "solution": [
    "在请求体中添加base_prompt和attributes字段"
  ]
}

2025-03-29 22:36:04,087 - ERROR - 测试用例 18.lack x-api-key 发送请求时出错: 400 Client Error: BAD REQUEST for url: http://127.0.0.1:5000/api/v5/weight/calculate Output: {
  "code": 400,
  "message": "缺少X-Api-Key",
  "solution": [
    "在请求头中添加X-Api-Key字段并设置有效的值"
  ]
}

